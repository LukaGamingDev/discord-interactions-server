<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: CommandInteraction.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: CommandInteraction.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Represents a Discord interaction
 */
class Interaction {
    /**
     * @typedef {Object} InteractionInfo
     * @property {string} id - Id of the interaction
     * @property {number} type - The type of the interaction
     * @property {?Object} data - The command data payload
     * @property {string} guild_id - The guild it was sent from
     * @property {string} channel_id - The channel it was sent from
     * @property {Object} member - Guild member data for the invoking user
     * @property {string} token - A continuation token for responding to the interaction
     * @property {number} version - Read-only property, always 1
     */

    /**
     * @param {DiscordInteractionsServer} server
     * @param {InteractionInfo} interactionInfo
     * @param {*} res
     */
    constructor(server, interactionInfo, res) {
        /**
         * The interaction
         * @type {InteractionInfo}
         */
        this.interaction = interactionInfo

        /**
         * Express Response
         * @private
         * @type {*}
         */
        this._res = res

        /**
         * The server this interaction belongs to
         */
        this.server = server
    }

    /**
     * Responds to a interaction
     * @param {Object} data
     */
    respond(data) {
        return this._res.json({
            type: 4,
            data
        })
    }

    /**
     * Edits the original or a follow up message
     * @param {Object} data
     * @param {?string} id - The id of the followup message to edit, if omitted will edit original message
     */
    edit(data, id) {
        const endpoint = id 
            ? `/webhooks/${this.server.applicationId}/${this.interaction.token}/messages/${id}`
            : `/webhooks/${this.server.applicationId}/${this.interaction.token}/messages/@original`

        return this.server.api.patch(endpoint, data)
            .then(res => res.data)
    }

    /**
     * Create a followup message
     * @param {Object} data
     */
    followup(data) {
        const endpoint = `/webhooks/${this.server.applicationId}/${this.interaction.token}`

        return this.server.api.post(endpoint, data)
            .then(res => res.data)
    }

    /**
     * Deletes the original or a follow up message
     * @param {string} id 
     */
    delete(id) {
        const endpoint = id 
            ? `/webhooks/${this.server.applicationId}/${this.interaction.token}/messages/${id}`
            : `/webhooks/${this.server.applicationId}/${this.interaction.token}/messages/@original`

        return this.server.api.delete(endpoint)
            .then(res => res.data)
    }
}

module.exports = Interaction</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CommandsManager.html">CommandsManager</a></li><li><a href="CommandsStore.html">CommandsStore</a></li><li><a href="Interaction.html">Interaction</a></li><li><a href="SlashCommand.html">SlashCommand</a></li></ul><h3>Global</h3><ul><li><a href="global.html#discordInteractionsServer">discordInteractionsServer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
